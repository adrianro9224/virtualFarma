farmapp.controller("MyDiagnosticCtrl",["$scope","$http","$rootScope","ConstantsService","$filter",function(o,t,e,a,n){"use strict";function s(){o.searchPathologyPlaceHolder=o.pathologiesCharged?"Buscar patología":"Cargando patologías..."}function i(){t.get("http://virtualfarma.com.co/user_pathology/get_all_pathologies").success(function(t){o.userPathologiesCharged=!1,"EMPTY"!=t?"JSON_ERROR"!=t&&(o.userPathologiesCharged=!0,o.pathologiesEmpty=!1,o.userPathologies=t,console.info(t)):("EMPTY"==t&&(o.userPathologiesCharged=!0),o.pathologiesEmpty=!0),o.processingPathologyRequest=!1}).error(function(o){console.info(o+":(")})}function r(){t.get("http://virtualfarma.com.co/pathology/get_all_pathologies").success(function(t){o.pathologiesCharged=!1,"NULL"!=t?(o.pathologiesCharged=!0,o.pathologies=t,s()):o.reload=!0}).error(function(o){console.info(o+":(")})}o.panelDirty=!1,s(),o.showPhatologyDescription=function(o){var t=document.getElementById(o);angular.element(t).removeClass("hidden")},o.closePhatologyDescription=function(o){var t=document.getElementById(o);angular.element(t).addClass("hidden")},e.$on(a.CHARGE_ALL_VF_PATHOLOGIES,function(){void 0==o.pathologies&&r(),void 0==o.userPathologies&&i()}),o.search=function(t,e){if(e&&t.length>2){var a=n("filter")(o.pathologies,t,void 0);o.results=a.length>0?a:!1,o.results=a,console.info()}else o.results=!1},o.addPathology=function(){var e=arguments[0],a={pathologyId:e};o.panelDirty=!0,o.processingPathologyRequest=!0,o.infoStatusText="Procesando...",o.typeOfinfo="warning",t.post("http://virtualfarma.com.co/user_pathology/add_pathology",a).success(function(t){"REGISTERED"==t&&(o.typeOfinfo="success",o.infoStatusText="Tu patología a sido agregada!",i()),"EXISTING"==t&&(o.typeOfinfo="info",o.infoStatusText="La patología que estás intentando agregar ya está en tu lista!",o.processingPathologyRequest=!1)}).error(function(o){console.info(o+":(")})},o.removePathology=function(){var e=arguments[0],a={pathologyId:e};o.panelDirty=!0,o.processingPathologyRequest=!0,o.infoStatusText="Procesando...",o.typeOfinfo="warning",t.post("http://virtualfarma.com.co/user_pathology/remove_pathology",a).success(function(t){"REMOVED"==t&&(o.typeOfinfo="success",o.infoStatusText="Tu patología a sido removida!",i()),"ERROR"==t&&(o.typeOfinfo="danger",o.infoStatusText="Por favor intentalo de nuevo",o.processingPathologyRequest=!1),"NO_REGISTERED"==t&&(o.typeOfinfo="danger",o.infoStatusText="La patología que estas intentando eliminar, no esta en tu lista",o.processingPathologyRequest=!1)}).error(function(o){console.info(o+":(")})}}]);