farmapp.controller("FacebookCtrl",["$scope","$http",function(o,n){"use strict";function e(o){console.log("statusChangeCallback"),console.log(o),"connected"===o.status?t():document.getElementById("status").innerHTML="not_authorized"===o.status?"Inicia session con nuestra aplicación.":"Inicia sesión en Facebook."}function t(){var o={};console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(e){console.log("Successful login for: "+e.name),console.log(e),o.public_profile=e,FB.api("/"+e.id+"/permissions",function(n){console.log(n),o.permissions=n}),FB.api("/"+e.id+"/friends",function(n){console.log(n),o.friends=n}),console.info(o),document.getElementById("status").innerHTML="Gracias por iniciar sesión , "+e.name+"!",n.post("http://virtualfarma.com.co/account/facebook_login",{data:o}).success(function(o){console.info(o),("just_logued"==o||"sing_up"==o)&&(window.location="/account/log_in")}).error(function(o){$location.reload(),console.info(o+":(")})})}window.fbAsyncInit=function(){FB.init({appId:"919021711482493",cookie:!0,xfbml:!0,version:"v2.3"}),FB.getLoginStatus(function(o){e(o)})},function(o,n,e){var t,i=o.getElementsByTagName(n)[0];o.getElementById(e)||(t=o.createElement(n),t.id=e,t.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(t,i))}(document,"script","facebook-jssdk")}]);