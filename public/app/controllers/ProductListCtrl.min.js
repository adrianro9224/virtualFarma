farmapp.controller("ProductListCtrl",["$scope","$log","$rootScope","$cookies","ConstantsService","UtilService","$timeout","$document",function(t,o,p,r,a,n){"use strict";function c(t,o,p,r,a,n,c,s,i,u){var e=parseFloat(s),i=parseInt(i),d=parseFloat(u),g=new Object;return g.id=t,g.PLU=p,g.name=o,g.barcode=r,g.categoryId=a,g.presentation=n,g.cant=c,g.tax=0==d?0:d,g.price=e,g.discount=0==i?0:i,g}var s=r.getObject("shoppingcart");void 0!=s&&(t.shoppingcart=s),t.addToShoppingCart=function(o,r,s,i,u,e,d,g,h,l){var f=n.isInteger(d);if(f){var m=parseInt(d,10);if(void 0!=t.shoppingcart&&t.shoppingcart.haveProducts){if(void 0!=t.shoppingcart&&void 0!=t.shoppingcart.products){var v=c(o,r,s,i,u,e,m,g,h,l),O=t.shoppingcart.products,b=!1;angular.forEach(O,function(p,r){void 0!=p&&o==p.id&&s==p.PLU&&(b=!0,t.shoppingcart.products[r].cant+=m,t.shoppingcart.numOfproductsTotal+=m)}),b||(t.shoppingcart.products[t.shoppingcart.numOfproductsSubtotal]=v,t.shoppingcart.numOfproductsSubtotal++,t.shoppingcart.numOfproductsTotal+=m)}}else{t.shoppingcart={},t.shoppingcart.products=[{}],t.shoppingcart.subtotal=0,t.shoppingcart.shippingCharge=0,t.shoppingcart.tax=0,t.shoppingcart.total=0,t.shoppingcart.numOfproductsSubtotal=0,t.shoppingcart.numOfproductsTotal=0,t.shoppingcart.limitOrderValueInvalid=!1,t.shoppingcart.minimumOrderValueInvalid=!1,t.shoppingcart.hasDiscount=!1,t.shoppingcart.sended=!1;var S=c(o,r,s,i,u,e,m,g,h,l);t.shoppingcart.products[t.shoppingcart.numOfproductsSubtotal]=S,t.shoppingcart.numOfproductsSubtotal++,t.shoppingcart.numOfproductsTotal+=m,t.shoppingcart.haveProducts=!0}p.$broadcast(a.SHOPPINGCART_CHANGED,t.shoppingcart)}},angular.element(document).ready(function(){})}]);